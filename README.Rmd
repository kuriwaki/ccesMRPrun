---
title: "Running MRP with CCES"
output: github_document
---

<!-- badges: start -->
[![R build status](https://github.com/kuriwaki/ccesMRPrun/workflows/R-CMD-check/badge.svg)](https://github.com/kuriwaki/ccesMRPrun/actions)
<!-- badges: end -->

```{r, eval = FALSE}
remotes::install_github("kuriwaki/ccesMRPrun")
```


```{r, message=FALSE}
library(ccesMRPrun)
library(tidyverse)
```




To prepare, see <www.shirokuriwaki.com/ccesMRPprep>. 

# Fitting

This is a simple wrapper around `brms::brm` but with some custom priors and a binomial model as a default.

```{r}
ff <- "yes | trials(n_response) ~ (1|age) + (1 + female |educ) + clinton_vote + (1|cd)"
cc_count <- ccesMRPprep::build_counts(cces_GA, model_ff = ff)

fit <- fit_brms_binomial(ff, cc_count)
```



# Poststratification

There are two main methods in this package: modeling and 

```{r}
poststrat_GA <- acs_GA
drw <- poststrat_draws(fit, 
                       poststrat_tgt = poststrat_GA,
                       orig_data = cc_count)
drw
```

# summaries

We often care about the posterior mean and 95 percent credible intervals of the draws. 

```{r}
drw$qID <- "Clinton_2pty"
summ_sims(drw)
```

